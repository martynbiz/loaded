"undefined"==typeof loaded&&(loaded={}),loaded.dispatch=function(){function t(t){t&&(r=null,u=!1,$.ajax({url:t,method:"GET",dataType:"json"}).done(function(t){d(t),l()}))}var n={},e=null,o=!0,r=null,u=!0,a={templates_dir:"",container_id:"loaded-content"},i=function(t){e=t,o=!0},d=function(t){r=t,u=!0};_loadTemplate=function(t){t=a.templates_dir+t;var r=n[t];r?(i(r),l()):(e=null,o=!1,$.ajax({url:t,method:"GET"}).done(function(e){n[t]=e,i(e),l()}))};var l=function(){return o&&u?(a.render(e,r),void loaded.dispatch.init(s())):!1},f=function(t,n){return"string"==typeof t?a[t]=n:a=loaded.utils.extend(a,t),a},c=function(t){return a[t]},s=function(){return document.getElementById(a.container_id)},v=function(t){s().innerHTML=t},p=function(t){t=t||document;for(var n=t.getElementsByTagName("a"),e=0;e<n.length;e++)n[e].addEventListener("click",function(t){var n=this,e=loaded.router.match(this.getAttribute("href"),"GET"),o=loaded.router.getCurrentLayout(),r=e&&void 0!=e.layout,u=null!=o&&e.layout!=o;if(!r||!u){var a=e&&"function"==typeof e.value;a&&(e.value(n.href),history.pushState({},"",n.href),n.blur(),t.preventDefault())}},!1);var o=loaded.router.match(window.location.pathname,"GET");o&&loaded.router.setCurrentLayout(o.layout),window.addEventListener("popstate",function(t){var n=loaded.router.match(window.location.pathname,"GET"),e=loaded.router.getCurrentLayout(),o=n&&void 0!=n.layout,r=null!=e&&n.layout!=e;o&&r&&(window.location.href=window.location.pathname);var u=n&&"function"==typeof n.value;u&&n.value(window.location.pathname)})};return{loadData:t,loadTemplate:_loadTemplate,getConfig:c,setConfig:f,setHTML:v,init:p}}(),"undefined"==typeof loaded&&(loaded={}),loaded.router=function(t){var n={},e=null,o="",r=function(t,e){if(!t)return void 0;"/"!=t&&"/"===t.substr(-1)&&(t=t.substr(0,t.length-1)),e||(e="GET");for(var o in n)if(result=u(t,e,n[o],o),result)return result},u=function(t,n,e,o,r,a){r||(r="");for(var i in e)if("/"===i.charAt(0))a=u(t,n,e[i],o,r+i,a);else{if(i!=n)continue;r.length>1&&(r=r.replace(/\/+$/,"")),r="^"+r+"$";var d=new RegExp(r),l=d.exec(t);l&&(l.shift(),a={},a.value=e[i],a.params=l,a.layout=o)}return a},a=function(t,n){return f(t,"GET",n)},i=function(t,n){return f(t,"POST",n)},d=function(t,n){return f(t,"PUT",n)},l=function(t,n){return f(t,"DELETE",n)},f=function(t,r,u){var t=o+t;n[e]=n[e]||{},n[e][t]=n[e][t]||{},n[e][t][r]=u},c=function(t,n){var o=e;e=t,n(),e=o},s=function(t,n){var e=o;o+=t,n(),o=e},v=function(t){return e},p=function(t){e=t},h=function(){return n};return{match:r,get:a,post:i,put:d,"delete":l,layout:c,group:s,setCurrentLayout:p,getCurrentLayout:v,getRoutes:h}}(),"undefined"==typeof loaded&&(loaded={}),loaded.utils=function(){var t=function(){for(var t={},n=0;n<arguments.length;n++)for(var e in arguments[n])t[e]=arguments[n][e];return t};return{extend:t}}();