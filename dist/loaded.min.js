var factory=function(e,t){return"undefined"==typeof loaded&&(loaded={}),loaded.cache=function(){var e={},t=function(t){return e[t]},n=function(t,n){e[t]=n},o=function(){return e={}};return{get:t,insert:n,clean:o}}(),"undefined"==typeof loaded&&(loaded={}),loaded.ajax=function(){var e=function(e,t){switch(t.toUpperCase()){case"JSON":e=JSON.parse(e)}return e},t=function(t){if(t=loaded.utils.extend({success:function(){},cache:!1,method:"GET",dataType:"text",data:null},t),t.cache&&_Cache.get(t.url))return t.success(e(_Cache.get(t.url),t.dataType),t.dataType),!0;var n;if(n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(_Cache.insert(t.url,n.responseText,t.dataType),t.success(e(n.responseText,t.dataType)))},n.open(t.method.toUpperCase(),t.url,!0),"POST"===t.method.toUpperCase()){n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var o=function(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}(t.data);n.send(o)}else n.send()};return{options:{},fetch:t}}(),"undefined"==typeof loaded&&(loaded={}),loaded.dispatch=function(){function n(t){t&&(u=null,d=!1,e.ajax({url:t,method:"GET",dataType:"json"}).done(function(e){c(e),f()}))}var o={},r=null,a=!0,u=null,d=!0,i=function(e){r=e,a=!0},c=function(e){u=e,d=!0};_loadTemplate=function(t){t=l.templates_dir+t;var n=o[t];n?(i(n),f()):(r=null,a=!1,e.ajax({url:t,method:"GET"}).done(function(e){o[t]=e,i(e),f()}))};var f=function(){if(!a||!d)return!1;var e=t.compile(r),n=document.getElementById("content");n.innerHTML=e(u),p(n)},l={templates_dir:""},s=function(e){return l=loaded.utils.extend(l,e)},p=function(e){console.log("loaded notice: init function not set")},y=function(e){p=e};return{loadData:n,loadTemplate:_loadTemplate,init:function(e){p(e)},setInit:y,config:s}}(),"undefined"==typeof loaded&&(loaded={}),loaded.router=function(e){var t={},n=null,o="",r=function(e,n){if(!e)return void 0;"/"!=e&&"/"===e.substr(-1)&&(e=e.substr(0,e.length-1)),n||(n="GET");for(var o in t)if(result=a(e,n,t[o],o),result)return result},a=function(e,t,n,o,r,u){r||(r="");for(var d in n)if("/"===d.charAt(0))u=a(e,t,n[d],o,r+d,u);else{if(d!=t)continue;r.length>1&&(r=r.replace(/\/+$/,"")),r="^"+r+"$";var i=new RegExp(r),c=i.exec(e);c&&(c.shift(),u={},u.value=n[d],u.params=c,u.layout=o)}return u},u=function(e,t){return f(e,"GET",t)},d=function(e,t){return f(e,"POST",t)},i=function(e,t){return f(e,"PUT",t)},c=function(e,t){return f(e,"DELETE",t)},f=function(e,r,a){var e=o+e;t[n]=t[n]||{},t[n][e]=t[n][e]||{},t[n][e][r]=a},l=function(e,t){var o=n;n=e,t(),n=o},s=function(e,t){var n=o;o+=e,t(),o=n},p=function(e){return n},y=function(e){n=e},v=function(){return t};return{match:r,get:u,post:d,put:i,"delete":c,layout:l,group:s,setCurrentLayout:y,getCurrentLayout:p,getRoutes:v}}(),"undefined"==typeof loaded&&(loaded={}),loaded.utils=function(){var e=function(){for(var e={},t=0;t<arguments.length;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e};return{extend:e}}(),loaded};"function"==typeof define&&define.amd?define(["jquery","handlebars"],factory):loaded=factory(jQuery,Handlebars);