"undefined"==typeof loaded&&(loaded={}),loaded.cache=function(){var e={},t=function(t){return e[t]},n=function(t,n){e[t]=n},o=function(){e={}};return{get:t,set:n,flush:o}}(),"undefined"==typeof loaded&&(loaded={}),loaded.http=function(){var e=function(e,t){switch(t.toUpperCase()){case"JSON":e=JSON.parse(e)}return e},t=function(t){if(t=loaded.utils.extend({success:function(){},get_cached:!1,method:"GET",data_type:"text",data:null},t),t.get_cached&&loaded.cache.get(t.url))return t.success(e(loaded.cache.get(t.url),t.data_type),t.data_type),!0;var n;if(n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(loaded.cache.set(t.url,n.responseText,t.data_type),t.success(e(n.responseText,t.data_type)))},n.open(t.method.toUpperCase(),t.url,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"===t.method.toUpperCase()){n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var o=function(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}(t.data);n.send(o)}else n.send()};return{options:{},send:t}}(),"undefined"==typeof loaded&&(loaded={}),loaded.dispatch=function(){function e(e,t){t=loaded.utils.extend({get_cached:!1},t),e&&(a=null,u=!1,loaded.http.send({url:e,method:"GET",data_type:"json",get_cached:t.get_cached,success:function(e){i(e),l()}}))}var t={},n=null,o=!0,a=null,u=!0,d={templates_dir:"/templates",container_id:"loaded-content",debug_mode:!1},r=function(e){n=e,o=!0},i=function(e){a=e,u=!0};_loadTemplate=function(e,a){a=loaded.utils.extend({get_cached:!0},a),e=d.templates_dir+e;var u=t[e];u?(r(u),l()):(n=null,o=!1,loaded.http.send({url:e,method:"GET",get_cached:a.get_cached,success:function(e){r(e),l()}}))};var l=function(){return o&&u?(d.render(n,a),void loaded.dispatch.init(f())):!1},c=function(e,t){return"string"==typeof e?d[e]=t:d=loaded.utils.extend(d,e),d},s=function(e){return d[e]},f=function(){return document.getElementById(d.container_id)},p=function(e){f().innerHTML=e},h=function(e){1==s("debug_mode")&&console.log("Loaded: Debug mode is ON"),e=e||document;for(var t=e.getElementsByTagName("a"),n=0;n<t.length;n++)t[n].addEventListener("click",function(e){1==s("debug_mode")&&e.preventDefault();var t=this,n=loaded.router.match(this.getAttribute("href"),"GET"),o=loaded.router.getCurrentLayout(),a=n&&void 0!=n.layout,u=null!=o&&n.layout!=o;if(!a||!u){var d=n&&"function"==typeof n.value;d&&(n.value(t.href),history.pushState({},"",t.href),t.blur(),e.preventDefault())}},!1);var o=loaded.router.match(window.location.pathname,"GET");o&&loaded.router.setCurrentLayout(o.layout),window.addEventListener("popstate",function(e){var t=loaded.router.match(window.location.pathname,"GET"),n=loaded.router.getCurrentLayout(),o=t&&void 0!=t.layout,a=null!=n&&t.layout!=n;o&&a&&(window.location.href=window.location.pathname);var u=t&&"function"==typeof t.value;u&&t.value(window.location.pathname)})};return{loadData:e,loadTemplate:_loadTemplate,getConfig:s,setConfig:c,setHTML:p,init:h}}(),"undefined"==typeof loaded&&(loaded={}),loaded.router=function(e){var t={},n=null,o="",a=function(e,n){if(!e)return void 0;"/"!=e&&"/"===e.substr(-1)&&(e=e.substr(0,e.length-1)),n||(n="GET");for(var o in t)if(result=u(e,n,t[o],o),result)return result},u=function(e,t,n,o,a,d){a||(a="");for(var r in n)if("/"===r.charAt(0))d=u(e,t,n[r],o,a+r,d);else{if(r!=t)continue;a.length>1&&(a=a.replace(/\/+$/,"")),a="^"+a+"$";var i=new RegExp(a),l=i.exec(e);l&&(l.shift(),d={},d.value=n[r],d.params=l,d.layout=o)}return d},d=function(e,t){return c(e,"GET",t)},r=function(e,t){return c(e,"POST",t)},i=function(e,t){return c(e,"PUT",t)},l=function(e,t){return c(e,"DELETE",t)},c=function(e,a,u){var e=o+e;t[n]=t[n]||{},t[n][e]=t[n][e]||{},t[n][e][a]=u},s=function(e,t){var o=n;n=e,t(),n=o},f=function(e,t){var n=o;o+=e,t(),o=n},p=function(e){return n},h=function(e){n=e},g=function(){return t};return{match:a,get:d,post:r,put:i,"delete":l,layout:s,group:f,setCurrentLayout:h,getCurrentLayout:p,getRoutes:g}}(),"undefined"==typeof loaded&&(loaded={}),loaded.utils=function(){var e=function(){for(var e={},t=0;t<arguments.length;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e};return{extend:e}}();